{% extends "base.html" %}

{% block title %}Ashen Emporium{% endblock %}

{% block content %}
<section class="hero">
    <h1>Welcome, Ashen One</h1>
    <p>
        Relics of forgotten kingdoms. Arms forged in dying embers.
        The Emporium stands for those who still walk the cindered paths.
    </p>

    <a href="{% url 'product_list' %}" class="cta-button">Enter the Catalogue</a>

</section>

<section style="margin-top: 2rem;">
  <h2>Shop by Category</h2>
  <p class="muted">Choose a path — each leads to a different kind of relic.</p>

  <div class="grid category-tiles">
    <a class="category-tile" href="{% url 'product_list' %}?category=weapon">
      <div class="tile-title">Weapons</div>
      <div class="tile-sub muted">Blades and iron oathbound.</div>
    </a>

    <a class="category-tile" href="{% url 'product_list' %}?category=shield">
      <div class="tile-title">Shields</div>
      <div class="tile-sub muted">Wards against the abyss.</div>
    </a>

    <a class="category-tile" href="{% url 'product_list' %}?category=armour">
      <div class="tile-title">Armour</div>
      <div class="tile-sub muted">Plate, mail, and scarred leather.</div>
    </a>

    <a class="category-tile" href="{% url 'product_list' %}?category=relic">
      <div class="tile-title">Relics</div>
      <div class="tile-sub muted">Tokens of forgotten vows.</div>
    </a>

    <a class="category-tile" href="{% url 'product_list' %}?category=consumable">
      <div class="tile-title">Consumables</div>
      <div class="tile-sub muted">Resins, flasks, and embers.</div>
    </a>

    <a class="category-tile" href="{% url 'product_list' %}?category=spell">
      <div class="tile-title">Spells</div>
      <div class="tile-sub muted">Scriptures and forbidden ink.</div>
    </a>

    <a class="category-tile" href="{% url 'product_list' %}?category=spell&subtype=sorcery">
      <div class="tile-title">Sorceries</div>
      <div class="tile-sub">Glintstone formulae and moonlit rites.</div>
    </a>

    <a class="category-tile" href="{% url 'product_list' %}?category=spell&subtype=incantation">
      <div class="tile-title">Incantations</div>
      <div class="tile-sub">Prayers, seals, and sacred flame.</div>
    </a>

  </div>
</section>

{% if featured %}
  <section style="margin-top: 2rem;">
    <h2>Featured Relics</h2>
    <p class="muted">Chosen from the Emporium’s sealed vaults.</p>

    <div class="grid">
      {% for product in featured %}
        <a class="product-card" href="{{ product.get_absolute_url }}">
          <div class="thumb">
            {% with img=product.primary_image %}
              {% if img %}
                <img src="{{ img.url }}" alt="{{ product.name }}">
              {% else %}
                <div class="thumb-placeholder">No image</div>
              {% endif %}
            {% endwith %}
          </div>

          <div class="product-meta">
            <div class="row">
              <h3 class="product-title">{{ product.name }}</h3>
              <span class="price">{{ product.price_gbp }}</span>
            </div>
            <div class="tags">
              <span class="tag">{{ product.get_category_display }}</span>
              <span class="tag">{{ product.get_rarity_display }}</span>
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  </section>
{% endif %}

{% if new_arrivals %}
  <section style="margin-top: 2.5rem;">
    <h2>New Arrivals</h2>
    <p class="muted">Recently catalogued from the Ashen archives.</p>

    <div class="grid">
      {% for product in new_arrivals %}
        <a class="product-card" href="{{ product.get_absolute_url }}">
          <div class="thumb">
            {% with img=product.primary_image %}
              {% if img %}
                <img src="{{ img.url }}" alt="{{ product.name }}">
              {% else %}
                <div class="thumb-placeholder">No image</div>
              {% endif %}
            {% endwith %}
          </div>

          <div class="product-meta">
            <div class="row">
              <h3 class="product-title">{{ product.name }}</h3>
              <span class="price">{{ product.price_gbp }}</span>
            </div>
            <div class="tags">
              <span class="tag">{{ product.get_category_display }}</span>
              {% if product.in_stock %}
                <span class="tag tag-ok">In stock</span>
              {% else %}
                <span class="tag tag-warn">Out</span>
              {% endif %}
            </div>
          </div>
        </a>
      {% endfor %}
    </div>

    <a href="{% url 'product_list' %}" class="cta-button" style="margin-top: 1.5rem; display:inline-block;">
      Browse full catalogue
    </a>
  </section>
{% endif %}

{% endblock %}
